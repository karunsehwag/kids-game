<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="style_match_pair.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
  <style>
  
    .game-container {
      max-width: 1700px;
    }
    .card-container 
    {
      grid-template-columns: repeat(7, 1fr);
     
    }

    .card 
    {
      width: 120px;
      height: 150px;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 1;
    }

    /* CSS for the modal content */
    .modal-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #f1f1f1; /* Light gray background */
      padding: 20px;
      border-radius: 10px; /* Rounded corners */
      text-align: center;
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
      max-width: 400px;
    }

    /* CSS for the close button */
    .close-button {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 24px; /* Larger close button */
      cursor: pointer;
      color: #888; /* Gray color */
    }

    .close-button:hover {
      color: #000; /* Darken on hover */
    }

   
    /* CSS for the close button */
    .close-button {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 24px; /* Larger close button */
      cursor: pointer;
      color: #888; /* Gray color */
    }

    .close-button:hover {
      color: #000; /* Darken on hover */
    }

   

    button:hover {
      background-color: #45a049;
    }
    .sound-control-button {
      position: absolute;
  top: 10px;
  right: 10px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 10px;
      font-size: 24px;
      color: #555;
      transition: color 0.3s;
    }

    .sound-control-button:hover {
      color: #333;
    }
    .modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  z-index: 1;
}

/* CSS for the modal content */
.modal-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: #f1f1f1; /* Light gray background */
  padding: 20px;
  border-radius: 10px; /* Rounded corners */
  text-align: center;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
  max-width: 400px;
}

/* CSS for the close button */
.close-button {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 24px; /* Larger close button */
  cursor: pointer;
  color: #888; /* Gray color */
}

.close-button:hover {
  color: #000; /* Darken on hover */
}

/* CSS for the play again button */
button {
  background-color: #4CAF50;
  color: white;
  padding: 12px 24px; /* Larger padding */
  border: none;
  border-radius: 10px; /* Rounded corners */
  margin-top: 20px; /* More space between button and content */
  cursor: pointer;
}

button:hover {
  background-color: #45a049;
}
  </style>
</head>
<body>
  <audio id="background-music" autoplay loop>
    <source src="sounds_effect/6-Happy-Commercial-Piano(chosic.com).mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <button id="toggle-music-button" class="sound-control-button">
    <i class="fas fa-volume-up"></i>
  </button>
  <audio id="background-music" autoplay loop>
    <source src="sounds_effect/6-Happy-Commercial-Piano(chosic.com).mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <button id="toggle-music-button" class="sound-control-button">
    <i class="fas fa-volume-up"></i>
  </button>

  <div class="game-container">
    <h1>Animal Matching Game</h1>
    <div class="game-info">
      <span id="time">Time: 0:00</span>
      <span id="score">Score: 0/7</span>
    </div>

    <div class="card-container">
     
    
    </div>
  </div>

  <script>
      document.addEventListener('DOMContentLoaded', function() {
      const backgroundMusic = document.getElementById('background-music');
      const toggleMusicButton = document.getElementById('toggle-music-button');

      toggleMusicButton.addEventListener('click', function() {
        if (backgroundMusic.paused) {
          backgroundMusic.play();
          toggleMusicButton.innerHTML = '<i class="fas fa-volume-up"></i>';
        } else {
          backgroundMusic.pause();
          toggleMusicButton.innerHTML = '<i class="fas fa-volume-mute"></i>';
        }
      });
    });
    let flippedCards = [];
    let matchedPairs = 0;
    let score = 0;

    let startTime = 0;
    let timerInterval;
    let elapsedTimeInSeconds = 0;
    const maxAllowedTimeInSeconds = 150;

    const imageUrls = [
      'images/match_pair_background.jpg',
      'images/what_goes_together_background.png',
      'images/spot_the_difference_background.jpg',
      'images/download (3).jpeg',
      'images/hard.jpg',
      'images/spot_the_difference_background.jpg',
      'images/medium.jpeg',
      'images/easy.jpg'
    ];

   
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

  
    function createImagePairs(imageUrls) {
      const pairs = [];
      const selectedIndexes = [];
      while (pairs.length < 7) {
        const randomIndex = Math.floor(Math.random() * imageUrls.length);
        if (!selectedIndexes.includes(randomIndex)) {
          selectedIndexes.push(randomIndex);
          pairs.push(imageUrls[randomIndex]);
        }
      }
      return [...pairs, ...pairs]; // Duplicate the images to create pairs
    }

    // Assign shuffled images to the cards
    function assignImagesToCards() {
      const cardContainer = document.querySelector('.card-container');
      const imagePairs = createImagePairs(imageUrls);
      shuffleArray(imagePairs);

      imagePairs.forEach((imageUrl, index) => {
        const card = document.createElement('div');
        card.classList.add('card');
        card.onclick = () => flipCard(card);

        const cardInner = document.createElement('div');
        cardInner.classList.add('card-inner');

        const cardFront = document.createElement('div');
        cardFront.classList.add('card-front');
        cardFront.textContent = `Card ${index + 1}`;

        const cardBack = document.createElement('div');
        cardBack.classList.add('card-back');
        cardBack.style.backgroundImage = `url(${imageUrl})`;

        cardInner.appendChild(cardFront);
        cardInner.appendChild(cardBack);
        card.appendChild(cardInner);
        cardContainer.appendChild(card);
      });
    }

    function startTimer() {
      startTime = Date.now();
      timerInterval = setInterval(updateTimer, 1000);
    }

    function updateTimer() {
      const currentTime = Date.now();
      elapsedTimeInSeconds = Math.floor((currentTime - startTime) / 1000);
      const minutes = Math.floor(elapsedTimeInSeconds / 60);
      const seconds = elapsedTimeInSeconds % 60;
      document.getElementById('time').textContent = `Time: ${minutes}:${seconds.toString().padStart(2, '0')}`;
      if (elapsedTimeInSeconds >= maxAllowedTimeInSeconds) {
    stopTimer();
    showLossPopup();
      }
    }
    function showLossPopup() {
  const modalContainer = document.createElement('div');
  modalContainer.className = 'modal';

  const modalContent = document.createElement('div');
  modalContent.className = 'modal-content';

  const closeButton = document.createElement('span');
  closeButton.className = 'close-button';
  closeButton.innerHTML = '&times;';
  closeButton.onclick = closePopup;

  const modalTitle = document.createElement('h2');
  modalTitle.textContent = 'Game Over';

  const modalText = document.createElement('p');
  modalText.textContent = 'Sorry, you ran out of time. Better luck next time!';

  const playAgainButton = document.createElement('button');
  playAgainButton.textContent = 'Play Again';
  playAgainButton.onclick = playAgain;

  modalContent.appendChild(closeButton);
  modalContent.appendChild(modalTitle);
  modalContent.appendChild(modalText);
  modalContent.appendChild(playAgainButton);

  modalContainer.appendChild(modalContent);
  document.body.appendChild(modalContainer);

  modalContainer.style.display = 'block';
}


    function stopTimer() {
      clearInterval(timerInterval);
    }

    function flipCard(card) {
      if (flippedCards.length < 2 && !card.classList.contains('flipped')) {
        card.classList.add('flipped');
        flippedCards.push(card);
        if (flippedCards.length === 2) {
          setTimeout(checkForMatch, 1000); // Check for a match after a delay
        }
      }
    }

    function checkForMatch() {
      const [card1, card2] = flippedCards;
      const image1 = card1.querySelector('.card-back').style.backgroundImage;
      const image2 = card2.querySelector('.card-back').style.backgroundImage;

      if (image1 === image2) {
        // Match found, remove matching cards
        card1.style.display = 'none';
        card2.style.display = 'none';
        flippedCards = [];
        matchedPairs++;
        score++;
        document.getElementById('score').textContent = `Score: ${score}/7`;
        if (matchedPairs === 7) {
          // Player has won
          stopTimer();
          const randomFact = getRandomAnimalFact();
          showpopup(7, elapsedTimeInSeconds, randomFact);
        }
      } else {
        // No match, flip cards back
        card1.classList.remove('flipped');
        card2.classList.remove('flipped');
        flippedCards = [];
      }
    }

    const animalFacts = [
      "The cheetah is the fastest land animal and can reach speeds up to 75 mph.",
      "Polar bears are excellent swimmers and have been known to swim hundreds of miles at a stretch.",
      "A group of flamingos is called a 'flamboyance.'",
      "Honeybees can recognize human faces.",
      "A kangaroo can jump up to three times its own body length in one leap.",
    ];

    function showpopup(finalScore, showTime, animalFact) {
      // Create a modal container
      const modalContainer = document.createElement('div');
      modalContainer.className = 'modal';

      // Create the modal content
      const modalContent = document.createElement('div');
      modalContent.className = 'modal-content';

      // Create a close button
      const closeButton = document.createElement('span');
      closeButton.className = 'close-button';
      closeButton.innerHTML = '&times;';
      closeButton.onclick = closePopup;

      // Create the content for the modal
      const modalTitle = document.createElement('h2');
      modalTitle.textContent = 'Game Over';

      const modalText = document.createElement('p');
      modalText.textContent = 'Congratulations! You won the game.';

      const scoreText = document.createElement('p');
      scoreText.innerHTML = 'Your final score is: <span id="final-score">' + finalScore + '</span>';

      const timeText = document.createElement('p');
      timeText.innerHTML = 'Time taken: ' + formatTime(showTime);

      const factText = document.createElement('p');
      factText.textContent = 'Random Animal Fact:';
      const fact = document.createElement('p');
      fact.textContent = animalFact;

      const playAgainButton = document.createElement('button');
      playAgainButton.textContent = 'Play Again';
      playAgainButton.onclick = playAgain;

      // Append the elements to the modal content
      modalContent.appendChild(closeButton);
      modalContent.appendChild(modalTitle);
      modalContent.appendChild(modalText);
      modalContent.appendChild(scoreText);
      modalContent.appendChild(timeText);
      modalContent.appendChild(factText);
      modalContent.appendChild(fact);
      modalContent.appendChild(playAgainButton);

      // Append the modal content to the modal container
      modalContainer.appendChild(modalContent);

      // Append the modal container to the body
      document.body.appendChild(modalContainer);

      modalContainer.style.display = 'block';
    }

    // Define the closePopup function to close the modal
    function closePopup() {
      const modalContainer = document.querySelector('.modal');
      modalContainer.style.display = 'none';
    }

    function playAgain() {
      closePopup();
      window.location.reload();
    }

    // Format time as MM:SS
    function formatTime(seconds) {
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = seconds % 60;
      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
    }

    // Get a random animal fact
    function getRandomAnimalFact() {
      const randomIndex = Math.floor(Math.random() * animalFacts.length);
      return animalFacts[randomIndex];
    }

// Define the closePopup function to close the modal
function closePopup() {
  const modalContainer = document.querySelector('.modal');
  modalContainer.style.display = 'none';
}

function playAgain() 
{
 
  closePopup();
  
 
  window.location.reload();
}

    // Start the timer when the game begins
    assignImagesToCards(); // Assign random images to cards
    startTimer();
  </script>
</body>
</html>
